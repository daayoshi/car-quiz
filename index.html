<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ãƒˆãƒ¨ã‚¿ ãƒŸãƒ‹ãƒãƒ³åˆ¤åˆ¥ã‚¯ã‚¤ã‚º</title>
    <style>
        /* å…¨ä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* ç”»é¢ã®æºã‚Œã‚’é˜²æ­¢ */
            background-color: #f0f2f5;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: env(safe-area-inset-top) 15px env(safe-area-inset-bottom) 15px;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        /* ã‚¯ã‚¤ã‚ºã®å¤–æ  */
        #quiz-container {
            background: white;
            width: 100%;
            max-width: 450px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º */
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
            color: #555;
            font-size: 14px;
        }

        /* ç”»åƒã‚¨ãƒªã‚¢ï¼šç”»é¢ã®é«˜ã•ã«åˆã‚ã›ã¦è‡ªå‹•èª¿æ•´ */
        .car-image-container {
            width: 100%;
            height: 35vh; /* ç”»é¢ã®é«˜ã•ã®35% */
            min-height: 180px;
            max-height: 250px;
            background-color: #000;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .car-image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* ç”»åƒã‚’ã¯ã¿å‡ºã•ã›ãªã„ */
        }

        /* å›ç­”ãƒœã‚¿ãƒ³ï¼ˆ2åˆ—ï¼‰ */
        .btn-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        button {
            padding: 18px 5px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            background: #2c3e50;
            color: white;
            font-weight: bold;
            -webkit-tap-highlight-color: transparent;
            transition: opacity 0.2s;
        }

        button:active { opacity: 0.7; }
        button:disabled { background: #bdc3c7; }

        /* ã€Œæ¬¡ã¸ã€ã€Œã‚‚ã†ä¸€åº¦ã€ãƒœã‚¿ãƒ³ï¼šå¤§ããã€æŠ¼ã—ã‚„ã™ã */
        #next-btn, #restart-btn {
            margin-top: 15px;
            width: 100%;
            background: #27ae60;
            padding: 20px;
            font-size: 18px;
        }
        
        #restart-btn { background: #2980b9; }

        #result-message {
            margin-top: 10px;
            font-size: 18px;
            font-weight: bold;
            min-height: 24px;
            color: #333;
        }

        /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; box-sizing: border-box;
        }

        #start-btn { width: 80%; max-width: 300px; background: #27ae60; padding: 20px; font-size: 20px; }

        .sound-setting {
            margin: 25px 0;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
    </style>
</head>
<body>

<div id="start-screen">
    <h1 style="color:#2c3e50; margin-bottom:10px;">ãƒŸãƒ‹ãƒãƒ³åˆ¤åˆ¥ã‚¯ã‚¤ã‚º</h1>
    <p style="color:#666;">iPhoneå¯¾å¿œç‰ˆ</p>
    
    <label class="sound-setting">
        <input type="checkbox" id="sound-toggle" checked style="width:24px; height:24px;">
        <span style="font-size:18px; font-weight:bold;">ğŸ”Š ã‚µã‚¦ãƒ³ãƒ‰ã‚ã‚Š</span>
    </label>

    <button id="start-btn">ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹</button>
</div>

<div id="quiz-container">
    <div class="stats">
        <span id="question-count">ç¬¬ 1 å• / 10</span>
        <span id="score-display">ã‚¹ã‚³ã‚¢: 0</span>
    </div>

    <div id="image-area" class="car-image-container">ç”»åƒèª­ã¿è¾¼ã¿ä¸­...</div>
    
    <div class="btn-container" id="answer-buttons">
        <button onclick="handleAnswer('ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰')">ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰</button>
        <button onclick="handleAnswer('ãƒ´ã‚§ãƒ«ãƒ•ã‚¡ã‚¤ã‚¢')">ãƒ´ã‚§ãƒ«ãƒ•ã‚¡ã‚¤ã‚¢</button>
        <button onclick="handleAnswer('ãƒã‚¢')">ãƒã‚¢</button>
        <button onclick="handleAnswer('ãƒ´ã‚©ã‚¯ã‚·ãƒ¼')">ãƒ´ã‚©ã‚¯ã‚·ãƒ¼</button>
    </div>

    <div id="result-message"></div>
    
    <button id="next-btn" style="display:none;" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸é€²ã‚€</button>
    <button id="restart-btn" style="display:none;" onclick="restartGame()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
</div>

<audio id="sound-correct" src="sounds/correct.mp3" preload="auto"></audio>
<audio id="sound-wrong" src="sounds/wrong.mp3" preload="auto"></audio>

<script>
    const carTypes = [
        { name: "ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰", folder: "alphard" },
        { name: "ãƒ´ã‚§ãƒ«ãƒ•ã‚¡ã‚¤ã‚¢", folder: "vellfire" },
        { name: "ãƒã‚¢", folder: "noah" },
        { name: "ãƒ´ã‚©ã‚¯ã‚·ãƒ¼", folder: "voxy" }
    ];
    let allImages = [];
    let currentQuizSet = [];
    let score = 0;
    let questionIndex = 0;
    let isSoundEnabled = true;

    // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
    document.getElementById('start-btn').addEventListener('click', function() {
        isSoundEnabled = document.getElementById('sound-toggle').checked;
        if (isSoundEnabled) {
            const a = document.getElementById('sound-correct');
            a.play().then(() => { a.pause(); a.currentTime = 0; });
        }
        document.getElementById('start-screen').style.display = 'none';
        initGame();
    });

    function initGame() {
        score = 0;
        questionIndex = 0;
        allImages = [];
        carTypes.forEach(car => {
            for (let i = 1; i <= 20; i++) {
                allImages.push({ name: car.name, img: car.folder + "/" + i + ".jpg" });
            }
        });
        currentQuizSet = allImages.sort(() => Math.random() - 0.5).slice(0, 10);
        showQuestion();
    }

    function showQuestion() {
        const data = currentQuizSet[questionIndex];
        document.getElementById('question-count').innerText = `ç¬¬ ${questionIndex + 1} å• / 10`;
        document.getElementById('result-message').innerText = "";
        document.getElementById('next-btn').style.display = "none";
        document.querySelectorAll('#answer-buttons button').forEach(b => b.disabled = false);
        document.getElementById('image-area').innerHTML = `<img src="${data.img}" onerror="this.parentNode.innerHTML='ç”»åƒãªã—<br>${data.img}'">`;
    }

    function handleAnswer(ans) {
        const data = currentQuizSet[questionIndex];
        document.querySelectorAll('#answer-buttons button').forEach(b => b.disabled = true);
        const res = document.getElementById('result-message');
        
        if (ans === data.name) {
            score++;
            res.innerText = "æ­£è§£ï¼ â­•ï¸";
            res.style.color = "#27ae60";
            if (isSoundEnabled) playSound('sound-correct');
        } else {
            res.innerText = "æ®‹å¿µï¼ âŒ æ­£è§£ã¯ " + data.name;
            res.style.color = "#e74c3c";
            if (isSoundEnabled) playSound('sound-wrong');
        }
        document.getElementById('score-display').innerText = `ã‚¹ã‚³ã‚¢: ${score}`;
        document.getElementById('next-btn').style.display = "block";
    }

    function playSound(id) {
        const a = document.getElementById(id);
        a.pause(); a.currentTime = 0; a.play();
    }

    function nextQuestion() {
        questionIndex++;
        if (questionIndex < 10) showQuestion();
        else showFinalResult();
    }

    function showFinalResult() {
        let rank = "";
        if (score === 10) rank = "ğŸ‘‘ä¼èª¬ã®ãƒã‚¹ã‚¿ãƒ¼";
        else if (score >= 7) rank = "ğŸ¥‡ãƒŸãƒ‹ãƒãƒ³åšå£«";
        else if (score >= 4) rank = "ğŸ¥ˆãƒŸãƒ‹ãƒãƒ³å¥½ã";
        else rank = "ğŸ¥‰ãƒŸãƒ‹ãƒãƒ³è¦‹ç¿’ã„";

        document.getElementById('image-area').innerHTML = `<div style="color:white;"><h2>çµ‚äº†ï¼</h2><p style="font-size:20px;">${rank}</p></div>`;
        document.getElementById('answer-buttons').style.display = "none";
        document.getElementById('next-btn').style.display = "none";
        document.getElementById('result-message').innerText = `10å•ä¸­ ${score}å• æ­£è§£ã§ã—ãŸï¼`;
        document.getElementById('restart-btn').style.display = "block";
    }

    function restartGame() {
        document.getElementById('answer-buttons').style.display = "grid";
        initGame();
    }
</script>
</body>
</html>
